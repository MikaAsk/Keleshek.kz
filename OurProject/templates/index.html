<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>–ê–Ω–∞–ª–∏—Ç–∏–∫–∞ —Ä—ã–Ω–∫–∞ —Ç—Ä—É–¥–∞</title>
    <link rel="stylesheet" href="{{ url_for('static', filename='style.css') }}">
    <script src="https://code.jquery.com/jquery-3.6.0.min.js"></script>
</head>
<body>
    <h1>üìä –î–∞—à–±–æ—Ä–¥ –∞–Ω–∞–ª–∏—Ç–∏–∫–∏ —Ä—ã–Ω–∫–∞ —Ç—Ä—É–¥–∞</h1>

    <form id="filters">
        <label>–†–µ–≥–∏–æ–Ω:</label>
        <select name="region">
            <option value="">–í—Å–µ</option>
            {% for region in regions %}
                <option value="{{ region }}">{{ region }}</option>
            {% endfor %}
        </select>

        <label>–û—Ç—Ä–∞—Å–ª—å:</label>
        <select name="industry">
            <option value="">–í—Å–µ</option>
            {% for industry in industries %}
                <option value="{{ industry }}">{{ industry }}</option>
            {% endfor %}
        </select>

        <label>–ü—Ä–æ—Ñ–µ—Å—Å–∏—è:</label>
        <select name="profession">
            <option value="">–í—Å–µ</option>
            {% for profession in professions %}
                <option value="{{ profession }}">{{ profession }}</option>
            {% endfor %}
        </select>

        <button type="submit">üîç –ê–Ω–∞–ª–∏–∑–∏—Ä–æ–≤–∞—Ç—å</button>
    </form>

    <div id="charts">
        <p>–í—ã–±–µ—Ä–∏—Ç–µ —Ñ–∏–ª—å—Ç—Ä—ã –∏ –Ω–∞–∂–º–∏—Ç–µ "–ê–Ω–∞–ª–∏–∑–∏—Ä–æ–≤–∞—Ç—å"</p>
    </div>

    <script>
        $(document).ready(function() {
            $("#filters").submit(function(event) {
                event.preventDefault();
                $.ajax({
                    type: "POST",
                    url: "/chart",
                    contentType: "application/json",
                    data: JSON.stringify({
                        region: $("select[name='region']").val(),
                        industry: $("select[name='industry']").val(),
                        profession: $("select[name='profession']").val()
                    }),
                    success: function(response) {
                        $("#charts").html(
                            response.salary_chart +
                            response.demand_supply_chart +
                            response.skills_chart +
                            response.industry_chart
                        );
                    }
                });
            });
        });
    </script>
</body>
</html>
